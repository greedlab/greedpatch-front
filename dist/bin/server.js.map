{"version":3,"sources":["bin/server.js"],"names":["debug","name","app","keys","cookie_keys","use","join","__dirname","level","requestIdContext","requestLogger","updateRequestLogFields","fields","err","body","request","router","routes","allowedMethods","listen","port"],"mappings":";;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;AAfA;AAgBA,IAAMA,QAAQ,oBAAU,kBAAIC,IAAd,CAAd;;AAEA,IAAMC,MAAM,mBAAZ;;AAEAA,IAAIC,IAAJ,GAAW,iBAAOC,WAAlB;;AAEA;;AAEAF,IAAIG,GAAJ,CAAQ,8BAAR;;AAEA;;AAEA;;AAEA;;AAEAH,IAAIG,GAAJ,CAAQ,0BAAQ,eAAKC,IAAL,CAAUC,SAAV,EAAoB,uBAApB,CAAR,CAAR;;AAEA;;AAEAL,IAAIG,GAAJ,CAAQ,yBAAM,eAAKC,IAAL,CAAUC,SAAV,EAAoB,WAApB,CAAN,CAAR;;AAEA;;AAEAL,IAAIG,GAAJ,CAAQ,+BAAgB;AACpBJ,UAAM,kBAAIA,IADU;AAEpBO,WAAO;AAFa,CAAhB,CAAR;AAIAN,IAAIG,GAAJ,CAAQ,0BAAgBI,gBAAhB,EAAR;AACAP,IAAIG,GAAJ,CAAQ,0BAAgBK,aAAhB,CAA8B;AAClCC,4BAAwB,gCAAUC,MAAV,EAAkBC,GAAlB,EAAuB;AAC3CD,eAAOE,IAAP,GAAc,KAAKC,OAAL,CAAaD,IAA3B;AACH;AAHiC,CAA9B,CAAR;;AAMA;;AAEAZ,IACKG,GADL,CACS,eAAKW,MAAL,CAAYC,MAAZ,EADT,EAEKZ,GAFL,CAES,eAAKW,MAAL,CAAYE,cAAZ,EAFT,EAGKb,GAHL,CAGS,kBAAQW,MAAR,CAAeC,MAAf,EAHT,EAIKZ,GAJL,CAIS,kBAAQW,MAAR,CAAeE,cAAf,EAJT,EAKKb,GALL,CAKS,kBAAQW,MAAR,CAAeC,MAAf,EALT,EAMKZ,GANL,CAMS,kBAAQW,MAAR,CAAeE,cAAf,EANT,EAOKb,GAPL,CAOS,gBAAMW,MAAN,CAAaC,MAAb,EAPT,EAQKZ,GARL,CAQS,gBAAMW,MAAN,CAAaE,cAAb,EART;;AAUA;;AAEAhB,IAAIiB,MAAJ,CAAW,iBAAOC,IAAlB","file":"bin/server.js","sourcesContent":["\nimport koa from 'koa';\n// import logger from 'koa-logger';\nimport favicon from 'koa-favicon';\nimport serve from 'koa-static';\nimport bodyParser from 'koa-bodyparser';\nimport path from 'path';\nimport koaBunyanLogger from 'koa-bunyan-logger';\n\nimport config from '../config';\n\nimport home from '../routes/home';\nimport project from '../routes/project';\nimport setting from '../routes/setting';\nimport admin from '../routes/admin';\n\nimport Debug from 'debug';\nimport pkg from '../../package.json';\nconst debug = new Debug(pkg.name);\n\nconst app = new koa();\n\napp.keys = config.cookie_keys;\n\n// bodyParser\n\napp.use(bodyParser());\n\n// logger\n\n// app.use(logger());\n\n// favicon\n\napp.use(favicon(path.join(__dirname,'../assets/favicon.ico')));\n\n// static\n\napp.use(serve(path.join(__dirname,'../assets')));\n\n// koa-bunyan-logger\n\napp.use(koaBunyanLogger({\n    name: pkg.name,\n    level: 'debug'\n}));\napp.use(koaBunyanLogger.requestIdContext());\napp.use(koaBunyanLogger.requestLogger({\n    updateRequestLogFields: function (fields, err) {\n        fields.body = this.request.body;\n    }\n}));\n\n// router\n\napp\n    .use(home.router.routes())\n    .use(home.router.allowedMethods())\n    .use(project.router.routes())\n    .use(project.router.allowedMethods())\n    .use(setting.router.routes())\n    .use(setting.router.allowedMethods())\n    .use(admin.router.routes())\n    .use(admin.router.allowedMethods());\n\n// listen\n\napp.listen(config.port);\n"],"sourceRoot":"/source/"}