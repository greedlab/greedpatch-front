{"version":3,"sources":["js/create-patch.js"],"names":["updatePatchVersion","versions_string","$","text","versions","JSON","parse","project_version","val","patch_version","version","_id","Number","uploadFile","formData","FormData","append","files","ajax","url","front_address","type","data","xhrFields","withCredentials","async","cache","contentType","processData","success","textStatus","attr","file_url","error"],"mappings":";;AAAA;;;;AAIA,SAASA,kBAAT,GAA8B;AAC1B,QAAMC,kBAAkBC,EAAE,kBAAF,EAAsBC,IAAtB,EAAxB;AACA,QAAMC,WAAWC,KAAKC,KAAL,CAAWL,eAAX,CAAjB;AACA,QAAMM,kBAAkBL,EAAE,kBAAF,EAAsBM,GAAtB,EAAxB;AACA,QAAIC,gBAAgB,CAApB;AAJ0B;AAAA;AAAA;;AAAA;AAK1B,6BAAoBL,QAApB,8HAA8B;AAAA,gBAArBM,OAAqB;;AAC1B,gBAAIA,QAAQC,GAAR,IAAeJ,eAAnB,EAAoC;AAChCE,gCAAgBG,OAAOF,QAAQD,aAAf,IAAgC,CAAhD;AACA;AACH;AACJ;AAVyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAW1BP,MAAE,gBAAF,EAAoBM,GAApB,CAAwBC,aAAxB;AACH;;AAED,SAASI,UAAT,GAAsB;AAClB,QAAIC,WAAW,IAAIC,QAAJ,EAAf;AACAD,aAASE,MAAT,CAAgB,MAAhB,EAAwBd,EAAE,aAAF,EAAiB,CAAjB,EAAoBe,KAApB,CAA0B,CAA1B,CAAxB;;AAEAf,MAAEgB,IAAF,CAAO;AACHC,aAAKC,gBAAgB,QADlB;AAEHC,cAAM,MAFH;AAGHC,cAAMR,QAHH;AAIHS,mBAAW;AACPC,6BAAiB;AADV,SAJR;AAOHC,eAAO,KAPJ;AAQHC,eAAO,KARJ;AASHC,qBAAa,KATV;AAUHC,qBAAa,KAVV;AAWHC,iBAAS,iBAAUP,IAAV,EAAgBQ,UAAhB,EAA4B;AACjC5B,cAAE,YAAF,EAAgB6B,IAAhB,CAAqB,OAArB,EAA8BT,KAAKU,QAAnC;AACH,SAbE;AAcHC,eAAO,eAAUX,IAAV,EAAgBQ,UAAhB,EAA4B;AAC/B5B,cAAE,eAAF,EAAmBC,IAAnB,CAAwB,eAAxB;AACH;AAhBE,KAAP;AAkBH","file":"js/create-patch.js","sourcesContent":["/**\n * Created by Bell on 16/9/1.\n */\n\nfunction updatePatchVersion() {\n    const versions_string = $('#versions-string').text();\n    const versions = JSON.parse(versions_string);\n    const project_version = $('#project-version').val();\n    let patch_version = 1;\n    for (let version of versions) {\n        if (version._id == project_version) {\n            patch_version = Number(version.patch_version) + 1;\n            break;\n        }\n    }\n    $('#patch-version').val(patch_version);\n}\n\nfunction uploadFile() {\n    let formData = new FormData();\n    formData.append('file', $('#patch-file')[0].files[0]);\n\n    $.ajax({\n        url: front_address + '/files' ,\n        type: 'POST',\n        data: formData,\n        xhrFields: {\n            withCredentials: true\n        },\n        async: false,\n        cache: false,\n        contentType: false,\n        processData: false,\n        success: function (data, textStatus) {\n            $(\"#patch-url\").attr(\"value\", data.file_url);\n        },\n        error: function (data, textStatus) {\n            $(\"#upload-error\").text(\"upload failed\");\n        }\n    });\n}\n"],"sourceRoot":"/source/"}