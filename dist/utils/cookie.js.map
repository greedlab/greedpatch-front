{"version":3,"sources":["utils/cookie.js"],"names":["setToken","getToken","clearToken","setRole","getRole","clearRole","clear","token_key","role_key","ctx","token","cookies","set","signed","httpOnly","maxAge","get"],"mappings":";;;;;QAOgBA,Q,GAAAA,Q;QAQAC,Q,GAAAA,Q;QAMAC,U,GAAAA,U;QAMAC,O,GAAAA,O;QAQAC,O,GAAAA,O;QAMAC,S,GAAAA,S;QAMAC,K,GAAAA,K;AA/ChB;;;;AAIA,IAAMC,YAAY,OAAlB;AACA,IAAMC,WAAW,MAAjB;;AAEO,SAASR,QAAT,CAAkBS,GAAlB,EAAuBC,KAAvB,EAA8B;AACjCD,QAAIE,OAAJ,CAAYC,GAAZ,CAAgBL,SAAhB,EAA2BG,KAA3B,EAAkC;AAC9BG,gBAAQ,IADsB;AAE9BC,kBAAU,KAFoB;AAG9BC,gBAAQA;AAHsB,KAAlC;AAKH;;AAEM,SAASd,QAAT,CAAkBQ,GAAlB,EAAuB;AAC1B,WAAOA,IAAIE,OAAJ,CAAYK,GAAZ,CAAgBT,SAAhB,EAA2B;AAC9BM,gBAAQ;AADsB,KAA3B,CAAP;AAGH;;AAEM,SAASX,UAAT,CAAoBO,GAApB,EAAyB;AAC5BA,QAAIE,OAAJ,CAAYC,GAAZ,CAAgBL,SAAhB,EAA2B,IAA3B,EAAiC;AAC7BM,gBAAQ;AADqB,KAAjC;AAGH;;AAEM,SAASV,OAAT,CAAiBM,GAAjB,EAAsBC,KAAtB,EAA6B;AAChCD,QAAIE,OAAJ,CAAYC,GAAZ,CAAgBJ,QAAhB,EAA0BE,KAA1B,EAAiC;AAC7BG,gBAAQ,IADqB;AAE7BC,kBAAU,KAFmB;AAG7BC,gBAAQA;AAHqB,KAAjC;AAKH;;AAEM,SAASX,OAAT,CAAiBK,GAAjB,EAAsB;AACzB,WAAOA,IAAIE,OAAJ,CAAYK,GAAZ,CAAgBR,QAAhB,EAA0B;AAC7BK,gBAAQ;AADqB,KAA1B,CAAP;AAGH;;AAEM,SAASR,SAAT,CAAmBI,GAAnB,EAAwB;AAC3BA,QAAIE,OAAJ,CAAYC,GAAZ,CAAgBJ,QAAhB,EAA0B,IAA1B,EAAgC;AAC5BK,gBAAQ;AADoB,KAAhC;AAGH;;AAEM,SAASP,KAAT,CAAeG,GAAf,EAAoB;AACvBP,eAAWO,GAAX;AACAJ,cAAUI,GAAV;AACH;;AAED,SAASM,MAAT,GAAkB;AACd,WAAO,IAAI,EAAJ,GAAS,EAAT,GAAc,EAAd,GAAmB,IAA1B;AACH","file":"utils/cookie.js","sourcesContent":["/**\n * Created by Bell on 16/9/1.\n */\n\nconst token_key = 'token';\nconst role_key = 'role';\n\nexport function setToken(ctx, token) {\n    ctx.cookies.set(token_key, token, {\n        signed: true,\n        httpOnly: false,\n        maxAge: maxAge()\n    });\n}\n\nexport function getToken(ctx) {\n    return ctx.cookies.get(token_key, {\n        signed: true\n    });\n}\n\nexport function clearToken(ctx) {\n    ctx.cookies.set(token_key, null, {\n        signed: true\n    });\n}\n\nexport function setRole(ctx, token) {\n    ctx.cookies.set(role_key, token, {\n        signed: true,\n        httpOnly: false,\n        maxAge: maxAge()\n    });\n}\n\nexport function getRole(ctx) {\n    return ctx.cookies.get(role_key, {\n        signed: true\n    });\n}\n\nexport function clearRole(ctx) {\n    ctx.cookies.set(role_key, null, {\n        signed: true\n    });\n}\n\nexport function clear(ctx) {\n    clearToken(ctx);\n    clearRole(ctx);\n}\n\nfunction maxAge() {\n    return 7 * 24 * 60 * 60 * 1000;\n}\n"],"sourceRoot":"/source/"}